
<head>
    <title>PathFynder</title>
    <meta charset="UTF-8">
    <link type="text/css" rel="stylesheet" href="profileandaccountstyles.css">
    <link href="https://fonts.googleapis.com/css?family=Lobster" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Raleway" rel="stylesheet">
    <link rel="icon" sizes="16x16" href="/favicon.ico?v=2">
</head>
<body>

</body>



<template name="accountsettings" class="accountsettings">
    <div class="logo"><a href="{{pathFor route='home'}}">PathFynder</a></div>
    <div class="header">
        <li><a href="#" class="logout">Logout</a></li>
        <li><a href="{{pathFor route='faq'}}">FAQ</a></li>
        <li><a href="{{pathFor route='profile'}}">Profile</a></li>
        <li><a href="{{pathFor route='accountsettings'}}">Account Settings</a></li>
    </div>
    <div class="navBar">
        <table>
            <tr>
                <td id="courses">
                    <div>
                        <a href="{{pathFor route='courses'}}">Courses</a>
                    </div>
                </td>
                <td id="internships">
                    <div>
                        <a href="{{pathFor route='internships'}}">Internships</a>
                    </div>
                </td>
                <td id="clubs">
                    <div>
                        <a href="{{pathFor route='clubs'}}">Clubs</a>
                    </div>
                </td>
                <td id="residential">
                    <div>
                        <a href="{{pathFor route='residential'}}">Residential</a>
                    </div>
                </td>
                <td id="dining">
                    <div>
                        <a href="{{pathFor route='dining'}}">Dining</a>
                    </div>
                </td>
            </tr>
        </table>
    </div>
    <div id="accountSettingsTitle">Account Settings</div>
</template>

<template name="profile">
    <div class="logo"><a href="{{pathFor route='home'}}">PathFynder</a></div>
    <div class="header">
        <li><a href="#" class="logout">Logout</a></li>
        <li><a href="{{pathFor route='faq'}}">FAQ</a></li>
        <li><a href="{{pathFor route='profile'}}">Profile</a></li>
        <li><a href="{{pathFor route='accountsettings'}}">Account Settings</a></li>
    </div>
    <div class="navBar">
        <table>
            <tr>
                <td id="courses">
                    <div>
                        <a href="{{pathFor route='courses'}}">Courses</a>
                    </div>
                </td>
                <td id="internships">
                    <div>
                        <a href="{{pathFor route='internships'}}">Internships</a>
                    </div>
                </td>
                <td id="clubs">
                    <div>
                        <a href="{{pathFor route='clubs'}}">Clubs</a>
                    </div>
                </td>
                <td id="residential">
                    <div>
                        <a href="{{pathFor route='residential'}}">Residential</a>
                    </div>
                </td>
                <td id="dining">
                    <div>
                        <a href="{{pathFor route='dining'}}">Dining</a>
                    </div>
                </td>
            </tr>
        </table>
    </div>
    <div class="pageTitle">Profile</div>
    <div class="profileBody">
        <div class="editProfileLink"><a href="{{pathFor route='editprofile'}}"><span id="editProfileLinkText">Edit Profile</span></a></div>
    </div>
</template>

<template name="editprofile">
    <div class="logo"><a href="{{pathFor route='home'}}">PathFynder</a></div>
    <div class="header">
        <li><a href="#" class="logout">Logout</a></li>
        <li><a href="{{pathFor route='faq'}}">FAQ</a></li>
        <li><a href="{{pathFor route='profile'}}">Profile</a></li>
        <li><a href="{{pathFor route='accountsettings'}}">Account Settings</a></li>
    </div>
    <div class="navBar">
        <table>
            <tr>
                <td id="courses">
                    <div>
                        <a href="{{pathFor route='courses'}}">Courses</a>
                    </div>
                </td>
                <td id="internships">
                    <div>
                        <a href="{{pathFor route='internships'}}">Internships</a>
                    </div>
                </td>
                <td id="clubs">
                    <div>
                        <a href="{{pathFor route='clubs'}}">Clubs</a>
                    </div>
                </td>
                <td id="residential">
                    <div>
                        <a href="{{pathFor route='residential'}}">Residential</a>
                    </div>
                </td>
                <td id="dining">
                    <div>
                        <a href="{{pathFor route='dining'}}">Dining</a>
                    </div>
                </td>
            </tr>
        </table>
    </div>
    <div class="pageTitle">Edit Profile</div>
    <div class="editProfile">
        <div class="editProfileOption">
            <form class="changeUsername" id="changeUsernameForm">
                <p id="editProfileType">Change Username</p>
                <p id="currentUsernameOption">
                    <script>
                            //console.log("Entered here");
                            var user = Meteor.users.findOne({_id: Meteor.userId()});
                            if(user) {
                                if (!Meteor.loggingIn()) {
                                    var username = user.profile.username;
                                } else {
                                    var username = user.profile.username;
                                }
                            }
                            console.log(username);
                            if(username === '') {
                                //console.log("Entered");
                                document.getElementById("currentUsernameOption").innerHTML = 'No username on record';
                            } else {
                                //console.log("Entered1");
                                document.getElementById("currentUsernameOption").innerHTML = 'Current Username: ' + username;
                        }
                    </script>
                </p>
                <input id ="changeUsernameOption" type="text" name="userName"  placeholder="Enter new Username">
                <p id="editProfileType">Change University</p>
                <p id="currentUniversityOption">
                    <script>
                        //console.log("Entered here");
                        console.log("User ID: " + Meteor.userId())
                        var user = Meteor.users.findOne({_id: Meteor.userId()});
                        console.log("Current User: " + Meteor.users.findOne({_id: Meteor.userId()}));
                        if(user) {
                            console.log("User exists right now");
                            if (!Meteor.loggingIn()) {
                                console.log("Time issue");
                                var university = user.profile.university;
                            } else {
                                console.log("Not time issue");
                                var university = user.profile.university;
                            }
                        } else {
                            console.log("User isn't defined problem");
                            console.log(Meteor.userId());
                        }
                        console.log(university);
                        if(university === '') {
                            //console.log("Entered");
                            document.getElementById("currentUniversityOption").innerHTML = 'No university on record';
                        } else {
                            //console.log("Entered1");
                            document.getElementById("currentUniversityOption").innerHTML = 'Current University: ' + university;
                        }
                    </script>
                </p>
                <input id ="changeUniversityOption" type="text" name="university"  placeholder="Enter new University">
                <p id="editProfileType">Change Major</p>
                <p id="currentMajorOption">
                    <script>
                        //console.log("Entered here");
                        var user = Meteor.users.findOne({_id: Meteor.userId()});
                        if(user) {
                            if (!Meteor.loggingIn()) {
                                var major = user.profile.major;
                            } else {
                                var major = user.profile.major;
                            }
                        }
                        console.log(major);
                        if(major === '') {
                            //console.log("Entered");
                            document.getElementById("currentMajorOption").innerHTML = 'No major on record';
                        } else {
                            //console.log("Entered1");
                            document.getElementById("currentMajorOption").innerHTML = 'Current Major: ' + major;
                        }
                    </script>
                </p>
                <input id ="changeMajorOption" type="text" name="major"  placeholder="Enter new Major">
                <p id="editProfileType">Change Graduation Date</p>
                <p id="currentGradDateOption">
                    <script>
                        //console.log("Entered here");
                        var user = Meteor.users.findOne({_id: Meteor.userId()});
                        if(user) {
                            if (!Meteor.loggingIn()) {
                                var graddate = user.profile.gradDate;
                                console.log("Entered: " + Meteor.user().profile.gradDate);
                            } else {
                                var graddate = user.profile.gradDate;
                                console.log("Didn't enter: " + Meteor.user().profile.gradDate);
                            }
                        }
                        console.log(graddate);
                        if(graddate === '') {
                            //console.log("Entered");
                            document.getElementById("currentGradDateOption").innerHTML = 'No Graduation Date on record';
                        } else {
                            //console.log("Entered1");
                            document.getElementById("currentGradDateOption").innerHTML = 'Current Graduation Date: ' + graddate;
                        }
                    </script>
                </p>
                <input id ="changeGradDateOption" type="text" name="GradDate"  placeholder="Enter new Graduation Date">
                <input id="changeProfileSubmit" type="submit" value="Update">
            </form>
        </div>
    </div>
</template>